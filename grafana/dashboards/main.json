{
  "annotations": { "list": [] },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "panels": [
    {
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 0 },
      "id": 1,
      "title": "EC2 CPU Usage",
      "type": "timeseries",
      "targets": [ { "expr": "100 - (avg by (instance) (irate(node_cpu_seconds_total{mode='idle'}[5s])) * 100)", "legendFormat": "CPU Load" } ],
      "fieldConfig": { "defaults": { "unit": "percent", "color": { "mode": "thresholds" }, "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 80 } ] } } }
    },
    {
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 0 },
      "id": 2,
      "title": "EC2 RAM Usage (MB/GB)",
      "type": "timeseries",
      "targets": [
        { 
          "expr": "node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes", 
          "legendFormat": "RAM Used" 
        },
        { 
          "expr": "node_memory_MemTotal_bytes", 
          "legendFormat": "Total RAM" 
        }
      ],
      "fieldConfig": { 
        "defaults": { 
          "unit": "decbytes", 
          "min": 0,
          "custom": { "axisPlacement": "auto", "drawStyle": "line", "fillOpacity": 10, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "showPoints": "auto", "spanNulls": false },
          "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] } 
        } 
      }
    },
    {
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 0 },
      "id": 3,
      "title": "Disk Usage (Root)",
      "type": "gauge",
      "targets": [ { "expr": "100 - ((node_filesystem_avail_bytes{mountpoint='/'} * 100) / node_filesystem_size_bytes{mountpoint='/'})", "legendFormat": "Disk Used" } ],
      "fieldConfig": { "defaults": { "unit": "percent", "max": 100, "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 90 } ] } } }
    },
    {
      "gridPos": { "h": 12, "w": 24, "x": 0, "y": 8 },
      "id": 4,
      "title": "Application Metrics (Real-Time 1s)",
      "type": "table",
      "targets": [
        { 
          "expr": "sum by (name) (irate(container_cpu_usage_seconds_total{id!=\"/\"}[5s]) * on(id) group_left(name) container_meta_info{name!~\"monitoring_.*\"}) * 100", 
          "format": "table", 
          "instant": true, 
          "legendFormat": "CPU" 
        },
        { 
          "expr": "sum by (name) (container_memory_usage_bytes{id!=\"/\"} * on(id) group_left(name) container_meta_info{name!~\"monitoring_.*\"})", 
          "format": "table", 
          "instant": true, 
          "legendFormat": "RAM" 
        },
        { 
          "expr": "sum by (name) ((time() - container_start_time_seconds{id!=\"/\"}) * on(id) group_left(name) container_meta_info{name!~\"monitoring_.*\"})", 
          "format": "table", 
          "instant": true, 
          "legendFormat": "Uptime" 
        },
        { 
          "expr": "sum by (name) (irate(container_network_receive_bytes_total{id!=\"/\"}[5s]) * on(id) group_left(name) container_meta_info{name!~\"monitoring_.*\"})", 
          "format": "table", 
          "instant": true, 
          "legendFormat": "Net In" 
        },
        { 
          "expr": "sum by (name) (irate(container_network_transmit_bytes_total{id!=\"/\"}[5s]) * on(id) group_left(name) container_meta_info{name!~\"monitoring_.*\"})", 
          "format": "table", 
          "instant": true, 
          "legendFormat": "Net Out" 
        },
        { 
          "expr": "sum by (name) (container_meta_info{name!~\"monitoring_.*\"})", 
          "format": "table", 
          "instant": true, 
          "legendFormat": "Status" 
        }
      ],
      "transformations": [
        { "id": "merge", "options": {} },
        { 
           "id": "organize", 
           "options": { 
             "excludeByName": {}, 
             "indexByName": {}, 
             "renameByName": { 
               "name": "Application Name", 
               "Value #A": "CPU %", 
               "Value #B": "RAM Usage", 
               "Value #C": "Uptime", 
               "Value #D": "Net In (Live Activity)",
               "Value #E": "Net Out (Live Response)",
               "Value #F": "Health Status" 
             } 
           } 
        }
      ],
      "fieldConfig": { 
        "defaults": { "unit": "short" }, 
        "overrides": [ 
          { "matcher": { "id": "byName", "options": "CPU %" }, "properties": [ { "id": "unit", "value": "percent" }, { "id": "decimals", "value": 1 } ] }, 
          { "matcher": { "id": "byName", "options": "RAM Usage" }, "properties": [ { "id": "unit", "value": "decbytes" }, { "id": "decimals", "value": 0 } ] },
          { "matcher": { "id": "byName", "options": "Net In (Live Activity)" }, "properties": [ { "id": "unit", "value": "binBps" }, { "id": "decimals", "value": 1 } ] },
          { "matcher": { "id": "byName", "options": "Net Out (Live Response)" }, "properties": [ { "id": "unit", "value": "binBps" }, { "id": "decimals", "value": 1 } ] },
          { 
            "matcher": { "id": "byName", "options": "Uptime" }, 
            "properties": [ 
              { "id": "unit", "value": "dthms" }, 
              { "id": "thresholds", "value": { "mode": "absolute", "steps": [ { "color": "red", "value": null }, { "color": "orange", "value": 60 }, { "color": "green", "value": 300 } ] } } 
            ] 
          },
          { 
            "matcher": { "id": "byName", "options": "Health Status" }, 
            "properties": [ 
              { "id": "mappings", "value": [ { "type": "value", "options": { "1": { "color": "green", "index": 0, "text": "RUNNING" } } } ] } 
            ] 
          } 
        ] 
      }
    }
  ],
  "refresh": "1s",
  "schemaVersion": 38,
  "style": "dark",
  "tags": ["automated"],
  "templating": { "list": [] },
  "time": { "from": "now-5m", "to": "now" },
  "title": "Master Node Overview",
  "uid": "master-node-01",
  "version": 1
}